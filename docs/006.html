<html>
<head>
<title>How to deploy Flask and MongoDB to Render</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何部署Flask和MongoDB进行渲染</h1>
<blockquote>原文：<a href="https://blog.teclado.com/how-to-deploy-flask-and-mongodb-to-render/">https://blog.teclado.com/how-to-deploy-flask-and-mongodb-to-render/</a></blockquote><div><div class="post-content">
<p>让我们快速浏览一下在Render.com上部署Flask应用程序和MongoDB数据库的最快和最便宜的方法！</p>
<p>我们将:</p>
<ul>
<li>为部署准备Flask应用程序。</li>
<li>获取MongoDB数据库。</li>
<li>创建一个渲染web服务来托管我们的应用程序。</li>
<li>部署！</li>
</ul>
<h2 id="prepare-your-flask-app-for-deployment">准备您的Flask应用程序进行部署</h2>
<p>要在Render.com部署Flask应用，你需要清楚两件事:</p>
<ul>
<li>app有哪些依赖关系？</li>
<li>app应该用什么Python版本？</li>
</ul>
<p>一旦你知道这些问题的答案，你就可以回答它们:</p>
<ul>
<li>在<code>requirements.txt</code>文件中写下你的应用依赖关系，如果你还没有写的话。确保添加<code>gunicorn</code>作为依赖项，因为Render将使用它来运行您的应用程序。</li>
<li>在步骤3中创建渲染web服务时，您将选择Python版本。</li>
</ul>
<h2 id="acquire-a-mongodb-database">获取MongoDB数据库</h2>
<p>获得MongoDB数据库的最快和最便宜的方法是使用MongoDB Atlas，这是MongoDB的官方云数据库服务。小型数据库免费！</p>
<p>前往<a href="https://www.mongodb.com/atlas/database">https://www.mongodb.com/atlas/database</a>报名。然后你可以为你的Flask应用创建一个免费的集群。</p>
<p>创建数据库后，您需要配置两个安全设置:<strong>数据库访问</strong>和<strong>网络访问</strong>。</p>
<p>在数据库访问下，创建一个带有密码的用户。确保使用安全的密码！对于用户的角色，您可以选择“读取和写入任何数据库”。</p>
<p>然后进入网络访问，点击“添加IP地址”按钮，然后点击“添加当前IP地址”。</p>
<p>这样，只有您的计算机才能访问数据库。当您创建渲染服务时，您将获得另一个IP地址添加到此列表中。</p>
<p>这就是MongoDB需要的全部配置！现在你可以回到“数据库”菜单，点击“连接”，然后“连接你的应用程序”。找到您使用的Python版本，并复制连接字符串。这是您的<code>MONGODB_URI</code>，但是记住用您在“数据库访问”步骤中生成的用户的安全密码替换<code>&lt;password&gt;</code>。</p>
<h2 id="create-a-render-web-service-for-your-flask-app">为您的Flask应用程序创建一个渲染web服务</h2>
<p>要部署渲染，您需要将您的应用程序放在GitHub中。创建一个GitHub帐户和一个新的GitHub存储库。可以是公有的，也可以是私有的。</p>
<p>如果您不熟悉Git，可以使用UI将项目文件添加到GitHub:</p>
<p><img src="../Images/ef25c4b245e76a600de3e0bcbc87184b.png" alt="Screenshot showing the GitHub UI with a repository open, and a dropdown showing the text 'Upload files' when you click on the '+' icon" loading="lazy" data-original-src="https://blog.teclado.com/content/images/2023/01/upload-files-github.png"/></p>
<p>一旦你的文件在GitHub库中，你可以去Render.com。</p>
<p>要创建渲染web服务，您需要创建一个帐户，然后单击右上角的New -&gt; Web Service。</p>
<p>如果你现在还没有，你需要把你的GitHub账号和Render链接起来。这样做之后，您将在Render中看到GitHub库的列表。在你的库上点击“连接”,这将允许Render从GitHub下载你的代码。</p>
<p>现在是渲染的设置。对于Flask应用程序，它们应该几乎总是这样(长图像警告，右键单击并在新标签中打开以放大):</p>
<p><img src="../Images/89143e152faf2d04699a8f3eaa8ebe0f.png" alt="Screenshot showing the settings for deploying our app in Render, detailed in the next few paragraphs" loading="lazy" data-original-src="https://blog.teclado.com/content/images/2023/01/render-settings.png"/></p>
<p>这幅图像中的情况是这样的:</p>
<ul>
<li>您可以随意命名您的服务。</li>
<li>对于一个地区，选择离你和你的用户近的。</li>
<li>您的分支名称应该与在GitHub中选择的分支名称相匹配。</li>
<li>构建步骤安装您的依赖项。既然我们用的是<code>requirements.txt</code>，这个应该是<code>pip install -r requirements.txt</code>。</li>
<li>start命令实际上运行您的应用程序。这里我们使用<code>gunicorn "app:create_app()"</code>,因为我们假设您使用的是Flask app工厂模式。如果不是，可以用<code>gunicorn app:app</code>代替。</li>
<li>我们选择一个免费的服务器。免费服务器有一些限制，但是它们很适合尝试部署。</li>
<li>在环境变量部分，我们添加了<code>PYTHON_VERSION</code>来告诉Render使用哪个Python版本，并添加了<code>MONGODB_URI</code>来存储您的Flask应用程序使用的MongoDB的连接字符串。</li>
</ul>
<p>当你点击“创建Web服务”，它应该开始部署！这可能需要几分钟的时间，所以准备好茶，5分钟后回来查看！</p>
<p>这就是这篇博文的全部内容。我想向您展示如何在Render中使用MongoDB和Flask，但是我们还有另一篇关于部署<a href="https://blog.teclado.com/how-to-deploy-your-first-rest-api-with-flask-for-free/"> Flask和PostgreSQL </a>的博文。</p>
<p>如果你想了解更多关于web开发和Flask的知识，可以考虑参加我们的<a href="https://go.tecla.do/web-dev-course-sale"> Web开发者训练营Flask和Python </a>课程！这是一个很长的视频课程，涵盖了HTML、CSS、Flask、MongoDB、部署等等。通过我们的链接，你会以最优惠的价格买到它。</p>
<p>感谢阅读，我们下次再见！</p>

</div>
</div>    
</body>
</html>