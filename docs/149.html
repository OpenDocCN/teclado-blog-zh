<html>
<head>
<title>Day 19 Exercise Solutions | Teclado</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>第19天锻炼解决方案| Teclado</h1>
<blockquote>原文：<a href="https://blog.teclado.com/python-30-day-19-exercise-solutions/">https://blog.teclado.com/python-30-day-19-exercise-solutions/</a></blockquote><div><article class="pb-12 prose prose-p:font-copy col-start-2 dark:prose-invert">
                    
                    <p>以下是我们为<a href="https://blog.teclado.com/30-days-of-python/"> 30天Python </a>系列中的<a href="/30-days-of-python/python-30-day-19-exception-handling">第19天练习</a>提供的解决方案。在检查解决方案之前，请确保您亲自尝试了这些练习！</p>
<h3>1)创建一个短程序，提示用户输入用逗号分隔的成绩列表。将字符串拆分为单独的等级，并使用列表理解将每个字符串转换为整数。当用户输入的值不能被转换时，您应该使用一个<code>try</code>语句来通知用户。</h3>
<p>让我们从编写获取成绩列表的<code>input</code>调用开始。我们也可以使用<code>split</code>方法来分割从<code>input</code>返回的字符串，所有的都在同一行上。</p>
<div class="codehilite"><pre><span/><code><span class="n">grades</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Please enter your grades, separated by commas: "</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">)</span>
</code></pre></div>

<p>在我们继续之前，让我们考虑一下，如果用户输入如下内容来响应我们的提示，会发生什么情况:</p>


<p>在这里，我们在所有逗号后面都有空格，所以我们得到的<code>grades</code>列表应该是:</p>
<div class="codehilite"><pre><span/><code><span class="p">[</span><span class="s1">'76 '</span><span class="p">,</span> <span class="s1">'93 '</span><span class="p">,</span> <span class="s1">'84 '</span><span class="p">,</span> <span class="s1">'81'</span><span class="p">]</span>
</code></pre></div>

<p>不过这不是问题，因为Python乐意接受字符串<code>'76 '</code>作为<code>int</code>或<code>float</code>的有效参数，它会为我们去掉空格。</p>
<p>因此，没有必要这样做:</p>
<div class="codehilite"><pre><span/><code><span class="n">grades</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Please enter your grades, separated by commas: "</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">)</span>
<span class="n">grades</span> <span class="o">=</span> <span class="p">[</span><span class="n">grade</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">grade</span> <span class="ow">in</span> <span class="n">grades</span><span class="p">]</span>
</code></pre></div>

<p>现在我们开始练习的核心部分。我们需要尝试将每个字符串转换成一个整数，然后我们需要捕捉用户提供无效值时出现的任何异常。</p>
<p>在用户输入无效值的情况下，我们将得到一个<code>ValueError</code>，所以这是我们需要用<code>except</code>子句捕捉的异常。</p>
<div class="codehilite"><pre><span/><code><span class="n">grades</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Please enter your grades, separated by commas: "</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="k">pass</span>
<span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
    <span class="k">pass</span>
</code></pre></div>

<p>在<code>try</code>子句中，我将创建一个list comprehension来将每个字符串转换成一个整数。然后我将把结果赋给<code>grades</code>。如果你需要一个关于列表理解如何工作的提示，再看看<a href="/30-days-of-python/python-30-day-15-comprehensions/">第15天</a>。</p>
<p>在<code>except</code>子句中，我将写一条消息通知用户他们的数据格式无效。</p>
<p>在一个更完整的应用程序中，使用<code>grades</code>的其余代码可能会放在一个<code>else</code>子句中，但是我们在这里不必担心这个。</p>
<div class="codehilite"><pre><span/><code><span class="n">grades</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Please enter your grades, separated by commas: "</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">grades</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">grade</span><span class="p">)</span> <span class="k">for</span> <span class="n">grade</span> <span class="ow">in</span> <span class="n">grades</span><span class="p">]</span>
<span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"The grades you entered were in an invalid format."</span><span class="p">)</span>
</code></pre></div>

<h3>2)调查当<code>try</code>语句的<code>try</code>子句和<code>finally</code>子句中都有<code>return</code>语句时会发生什么。</h3>
<p>为了完成这个练习，我们需要写一个函数，因为我们需要一个从返回<em>的函数。</em></p>
<p>在这里我们不必太花哨。这将会:</p>


<p>现在让我们把我们的<code>try</code>语句放在函数体中。我建议你对两个返回值使用不同的东西，这样我们就知道我们的值来自哪里。</p>
<p>类似下面的函数可能是合适的:</p>
<div class="codehilite"><pre><span/><code><span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">"Returned from the try clause!"</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">"Returned from the finally clause!"</span>
</code></pre></div>

<p>现在让我们调用我们的函数，看看会发生什么。</p>
<div class="codehilite"><pre><span/><code><span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">"Returned from the try clause!"</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">"Returned from the finally clause!"</span>

<span class="nb">print</span><span class="p">(</span><span class="n">func</span><span class="p">())</span>  <span class="c1"># "Returned from the finally clause!"</span>
</code></pre></div>

<p>可能有点令人惊讶的是，我们在<code>finally</code>子句中获得了返回值。这也有一定的道理，因为<code>finally</code>子句<em>总是</em>运行，并且它会中断<code>try</code>子句中的<code>return</code>。它有效地暂停了那个<code>return</code>，同时执行自己的<code>return</code>。</p>
<p>问题是，如果我们在finally子句中执行<code>return</code>,我们就结束了函数的执行，所以我们再也不会回来执行<code>try</code>子句中的函数。它只是被遗忘了。</p>
<h3>3)假设您有一个名为<code>data.txt</code>的文件。使用Python打开它进行读取，但是要确保使用try块来捕获文件不存在时出现的异常。一旦您验证了您的解决方案可以处理一个实际的文件，请删除该文件，看看您的try块是否能够处理它。</h3>
<p>我们的<code>data.txt</code>文件的内容很简单，如下所示:</p>


<p>这并不十分重要。</p>
<p>我们还被告知，我们需要注意的异常是<code>FileNotFoundError</code>。</p>
<p>记住这一点，让我们构建我们的<code>try</code>语句:</p>
<div class="codehilite"><pre><span/><code><span class="k">try</span><span class="p">:</span>
    <span class="k">pass</span>
<span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
    <span class="k">pass</span>
</code></pre></div>

<p>在我们的<code>try</code>子句中，我们将编写访问文件的代码。我将把文件内容打印到控制台上。在<code>except</code>子句中，我将向用户写一条消息，指出找不到该文件。</p>
<p>在实际的应用程序中，我们可能会利用这个机会为用户创建文件。</p>
<div class="codehilite"><pre><span/><code><span class="k">try</span><span class="p">:</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">"data.txt"</span><span class="p">,</span> <span class="s2">"r"</span><span class="p">)</span> <span class="k">as</span> <span class="n">text_file</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">text_file</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"Error: Couldn't find data.txt"</span><span class="p">)</span>
</code></pre></div>

<p>就这样，我们结束了！</p> 
                </article>
            
            </div>    
</body>
</html>