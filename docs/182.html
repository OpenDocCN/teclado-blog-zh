<html>
<head>
<title>Using "match...case" in Python 3.10</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>使用“匹配...Python 3.10中的“案例”</h1>
<blockquote>原文：<a href="https://blog.teclado.com/python-match-case/">https://blog.teclado.com/python-match-case/</a></blockquote><div><div class="post-content">
<p>这篇文章将向您概述什么是新的“匹配...case”语法在Python 3.10中及其用法。然后，我们将更深入地研究高级用法。</p>
<p>“比赛...case”语法类似于其他面向对象语言中的switch语句，它旨在使结构与大小写的匹配更加容易。</p>
<p>我们开始吧！</p>
<h2 id="thesyntax">语法</h2>
<p>“比赛...case "语法如下:</p>
<pre><code class="language-py">def greeting(message):
	match message.split():
		case ["hello"]:
			print("this message says hello")
		case ["hello", name]:
			print("This message is a personal greeting to {name}")
		case _:
			print("The message didn’t match with anything")
</code></pre>
<p>让我们浏览一下语法，看看它是如何工作的。</p>
<p>我们创建的函数接受一个名为<code>message</code>的参数。<code>match</code>关键字接受一个对象来比较列出的案例。</p>
<p>在我们的例子中，match关键字接受一个字符串列表，这是<code>message.split()</code>操作的结果。为了进一步说明，假设我们这样调用函数:</p>
<pre><code class="language-py">greeting("hello")
</code></pre>
<p>这个函数首先会在所有的空格上分割这个字符串，并生成一个列表。对于上面的输入，<code>match</code>操作符将使用<code>["hello"]</code>的列表。然后将列表与每个案例进行比较。我们的第一个案例是:</p>
<pre><code class="language-py">case ["hello"]
</code></pre>
<p>我们的输入与此完全匹配，因此代码在这种情况下继续执行。</p>
<p>输出:</p>
<pre><code>this message says hello
</code></pre>
<p>如果我们这样调用函数会怎么样:<code>greeting("hello George")</code>？</p>
<p>使用该输入，匹配操作符将使用一个列表<code>["hello", "George"]</code>来比较所有案例。第一种情况<code>case "hello"</code>不匹配，因为比较列表中有两个元素，而不是一个。</p>
<div class="style-note">
<h3 class="style-note-title">结构匹配</h3>
<p class="style-note-content">匹配运算符匹配给定表达式的结构。因此，由于case表达式的长度，我们的第一个case不匹配，即使比较表达式与列表中的第一个元素匹配。</p>
</div>
<p>第二种情况是<code>["hello", name]</code>。这是我们的输入匹配的情况。如果您没有给Python一个匹配的文字值，它将把比较表达式中的任何值绑定到case表达式中的变量名。所以在我们的例子中，<code>name</code>将被设置为<code>George</code>。并且这个case匹配(它有<code>"hello"</code>作为第一个元素，还有一个元素被绑定到<code>name</code>)，所以输出是:</p>
<pre><code>This message is a personal greeting to George
</code></pre>
<p>现在我们试着这样调用函数:<code>greeting("hello George Johnson")</code>。</p>
<p>比较表达式变成了<code>["hello", "George", "Johnson"]</code>。现在让我们看一下每个案例。第一种情况失败，因为比较表达式中有3个元素，而不是1个。第二种情况以同样的方式失败；第二种情况希望看到长度为2的列表，其中第一个元素是<code>"hello"</code>。第一个元素实际上是<code>"hello"</code>，但是比较表达式有3个元素，所以这种情况不匹配。</p>
<p>剩下的唯一选项是下划线大小写，这是默认的匹配所有内容的大小写。可以把它想象成switch语句中的<code>default</code>案例。如果一个比较表达式不匹配任何其他东西，它将总是匹配<code>_</code>的情况。</p>
<div class="style-note">
<h3 class="style-note-title">下划线表示最后一种情况</h3>
<p class="style-note-content">任何低于此大小写的大小写都不会运行，因为所有大小写都将与下划线大小写匹配。这类似于if中的关键字<code>else</code>...否则。<br/><code>_</code>案例匹配一切，因为Python将<code>_</code>识别为有效的变量名。因此，就像我们匹配案例<code>["hello", name]</code>时一样，比较表达式将绑定到<code>_</code>名称。在我们的具体例子中，<code>_</code>变量将保存值<code>["hello", "George", "Johnson"]</code>。</p>
</div>
<p>因此，在我们最近的函数调用<code>greeting("hello George Johnson")</code>中，输出将是:</p>
<pre><code>The message didn’t match with anything
</code></pre>
<h2 id="advancedusage">高级用法</h2>
<p>“比赛...case”语法是一个非常强大的工具，可以用来比较许多不同的表达式和值。如果您像我们在上面的例子中那样比较一个列表，那么您可以使用<code>match</code>的更多特性。</p>
<p>在<code>case</code>表达式中，您可以使用一个操作符将所有剩余的元素放入一个变量中。例如:</p>
<pre><code class="language-py">comparison_list = ["one", "two", "three"]

match comparison_list:
    case [first]:
        print("this is the first element: {first}")
    case [first, *rest]:
        print("This is the first: {first}, and this is the rest: {rest}")
    case _:
        print("Nothing was matched")
</code></pre>
<p>在这个代码片段中，第二种情况将匹配并执行，输出为:</p>
<pre><code>This is the first: one, and this is the rest: ["two", "three"]
</code></pre>
<p>您还可以用两个或更多的结构组成case分支，如下所示:</p>
<pre><code class="language-py">match comparisonList:
    case [first] | [first, "two", "seven"]:
        print("this is the first element: {first}")
    case [title, "hello"] | ["hello", title]:
        print("Welcome esteemed guest {title}")
    case [first, *rest]:
        print("This is the first: {first}, and this is the rest: {rest}")
    case _:
        print("Nothing was matched")
</code></pre>
<p>第一个和第二个case由几个不同的表达式组成，比较表达式可以适合case分支的运行。这给了你一些灵活性来组成你的分支。</p>
<p>我们还将报道“比赛”...字典的语法。匹配运算符将检查比较表达式是否包含case表达式中的属性。例如:</p>
<pre><code class="language-py">comparisonDictionary = {
    "John": "boy",
    "Jack": "boy",
    "Jill": "girl",
    "Taylor": "girl"
}

match comparisonDictionary:
    case {"John": "boy", "Taylor": "boy"}:
        print("John and Taylor are both boys")
    case {"John": "boy", "Taylor": "girl"}:
        print("Taylor is a girl and John is a boy")
    case _:
        print("Nothing matches")
</code></pre>
<p>将输出:</p>
<pre><code>Taylor is a girl and John is a boy
</code></pre>
<p><code>match</code>操作符将检查case属性是否存在于输入字典中，然后检查值是否匹配。</p>
<div class="style-note">
<h3 class="style-note-title">重要的</h3>
<p class="style-note-content">在字典匹配中，<code>case</code>仍然匹配，即使输入字典的属性比<code>case</code>指定的属性多。</p>
</div>
<p>如果你想更深入地了解，请看这里的获取官方文档。</p>
<h2 id="caseclosed">结案了。</h2>
<p>总之，新的“匹配...case”运算符是Python开发人员在创建分支案例时可以利用的强大工具。有了它，您可以可靠地检查任何传入变量的结构，并确保您不会试图访问变量上不存在的内容。</p>
<p>如果你想学习更多关于Python的知识，可以考虑参加我们的<a href="https://go.tecla.do/complete-python-sale">完整Python课程</a>，它将带你从初级到高级(包括OOP、web开发、异步开发等等！).我们有30天的退款保证，所以你试一试也不会有什么损失。我们很希望你能来！</p>

</div>
</div>    
</body>
</html>