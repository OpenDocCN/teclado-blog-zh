<html>
<head>
<title>Day 14: Exercise Solutions | Teclado</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>第14天:锻炼解决方案| Teclado</h1>
<blockquote>原文：<a href="https://blog.teclado.com/python-30-day-14-exercise-solutions/">https://blog.teclado.com/python-30-day-14-exercise-solutions/</a></blockquote><div><article class="pb-12 prose prose-p:font-copy col-start-2 dark:prose-invert">
                    
                    <p>以下是我们为<a href="https://blog.teclado.com/30-days-of-python/"> 30天Python </a>系列中的<a href="/30-days-of-python/python-30-day-14-files">第14天练习</a>提供的解决方案。在检查解决方案之前，请确保您亲自尝试了这些练习！</p>
<h3>1)使用上下文管理器重写以下代码。</h3>
<div class="codehilite"><pre><span/><code><span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">"hello_world.txt"</span><span class="p">,</span> <span class="s2">"w"</span><span class="p">)</span>
<span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">"Hello, World!"</span><span class="p">)</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div>

<p>我们的上下文管理器的第一行如下所示:</p>
<div class="codehilite"><pre><span/><code><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">"hello_world.txt"</span><span class="p">,</span> <span class="s2">"w"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="k">pass</span>
</code></pre></div>

<p>首先我们有<code>with</code>关键字，然后是<code>open</code>调用，然后我们使用<code>as</code>提供一个变量名，这样我们就可以很容易地引用文件内容。</p>
<p>在这一行下面，我们有一个缩进的块，包含文件打开时我们想做的所有事情。当这些操作完成后，Python将为我们关闭文件。</p>
<div class="codehilite"><pre><span/><code><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">"hello_world.txt"</span><span class="p">,</span> <span class="s2">"w"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">"Hello, World!"</span><span class="p">)</span>
</code></pre></div>

<h3>2)使用append模式将<code>"How are you?"</code>写入上面的<code>hello_world.txt</code>文件的第二行。</h3>
<p>同样，我们应该在这里使用上下文管理器，第一行几乎完全相同。我们只需要把<code>"w"</code>换成<code>"a"</code>。</p>
<div class="codehilite"><pre><span/><code><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">"hello_world.txt"</span><span class="p">,</span> <span class="s2">"a"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="k">pass</span>
</code></pre></div>

<p>如果您愿意，您可以为任何值使用关键字参数，并且您可以在文档中找到<code>open</code>参数<a href="https://docs.python.org/3/library/functions.html?highlight=open#open">的名称。</a></p>
<p>现在我们只需要调用<code>write</code>并传入<code>"\nHow are you?"</code>作为字符串。</p>
<div class="codehilite"><pre><span/><code><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">"hello_world.txt"</span><span class="p">,</span> <span class="s2">"a"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">How are you?"</span><span class="p">)</span>
</code></pre></div>

<p>确保不要错过<code>\\n</code>，因为我们希望这一行出现在第二行。因此，我们需要在第一行之后添加一个换行符。</p>
<h3>3)获取我们从Iris flower数据集创建的字典列表，并将其写入CSV格式的新文件。</h3>
<p>在这里，我们基本上执行与之前相同的步骤，只是方向相反。</p>
<p>如果你愿意，你可以使用以前的repl，但是如果你使用的是一个新的repl，为了方便起见，这里有一个字典列表:</p>
<div class="codehilite"><pre><span/><code><span class="n">irises</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s1">'sepal_length'</span><span class="p">:</span> <span class="s1">'5.1'</span><span class="p">,</span> <span class="s1">'sepal_width'</span><span class="p">:</span> <span class="s1">'3.5'</span><span class="p">,</span> <span class="s1">'petal_length'</span><span class="p">:</span> <span class="s1">'1.4'</span><span class="p">,</span> <span class="s1">'petal_width'</span><span class="p">:</span> <span class="s1">'0.2'</span><span class="p">,</span> <span class="s1">'species'</span><span class="p">:</span> <span class="s1">'Iris-setosa'</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">'sepal_length'</span><span class="p">:</span> <span class="s1">'4.9'</span><span class="p">,</span> <span class="s1">'sepal_width'</span><span class="p">:</span> <span class="s1">'3'</span><span class="p">,</span>   <span class="s1">'petal_length'</span><span class="p">:</span> <span class="s1">'1.4'</span><span class="p">,</span> <span class="s1">'petal_width'</span><span class="p">:</span> <span class="s1">'0.2'</span><span class="p">,</span> <span class="s1">'species'</span><span class="p">:</span> <span class="s1">'Iris-setosa'</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">'sepal_length'</span><span class="p">:</span> <span class="s1">'4.7'</span><span class="p">,</span> <span class="s1">'sepal_width'</span><span class="p">:</span> <span class="s1">'3.2'</span><span class="p">,</span> <span class="s1">'petal_length'</span><span class="p">:</span> <span class="s1">'1.3'</span><span class="p">,</span> <span class="s1">'petal_width'</span><span class="p">:</span> <span class="s1">'0.2'</span><span class="p">,</span> <span class="s1">'species'</span><span class="p">:</span> <span class="s1">'Iris-setosa'</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">'sepal_length'</span><span class="p">:</span> <span class="s1">'4.6'</span><span class="p">,</span> <span class="s1">'sepal_width'</span><span class="p">:</span> <span class="s1">'3.1'</span><span class="p">,</span> <span class="s1">'petal_length'</span><span class="p">:</span> <span class="s1">'1.5'</span><span class="p">,</span> <span class="s1">'petal_width'</span><span class="p">:</span> <span class="s1">'0.2'</span><span class="p">,</span> <span class="s1">'species'</span><span class="p">:</span> <span class="s1">'Iris-setosa'</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">'sepal_length'</span><span class="p">:</span> <span class="s1">'5'</span><span class="p">,</span>   <span class="s1">'sepal_width'</span><span class="p">:</span> <span class="s1">'3.6'</span><span class="p">,</span> <span class="s1">'petal_length'</span><span class="p">:</span> <span class="s1">'1.4'</span><span class="p">,</span> <span class="s1">'petal_width'</span><span class="p">:</span> <span class="s1">'0.2'</span><span class="p">,</span> <span class="s1">'species'</span><span class="p">:</span> <span class="s1">'Iris-setosa'</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">'sepal_length'</span><span class="p">:</span> <span class="s1">'7'</span><span class="p">,</span>   <span class="s1">'sepal_width'</span><span class="p">:</span> <span class="s1">'3.2'</span><span class="p">,</span> <span class="s1">'petal_length'</span><span class="p">:</span> <span class="s1">'4.7'</span><span class="p">,</span> <span class="s1">'petal_width'</span><span class="p">:</span> <span class="s1">'1.4'</span><span class="p">,</span> <span class="s1">'species'</span><span class="p">:</span> <span class="s1">'Iris-versicolor'</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">'sepal_length'</span><span class="p">:</span> <span class="s1">'6.4'</span><span class="p">,</span> <span class="s1">'sepal_width'</span><span class="p">:</span> <span class="s1">'3.2'</span><span class="p">,</span> <span class="s1">'petal_length'</span><span class="p">:</span> <span class="s1">'4.5'</span><span class="p">,</span> <span class="s1">'petal_width'</span><span class="p">:</span> <span class="s1">'1.5'</span><span class="p">,</span> <span class="s1">'species'</span><span class="p">:</span> <span class="s1">'Iris-versicolor'</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">'sepal_length'</span><span class="p">:</span> <span class="s1">'6.9'</span><span class="p">,</span> <span class="s1">'sepal_width'</span><span class="p">:</span> <span class="s1">'3.1'</span><span class="p">,</span> <span class="s1">'petal_length'</span><span class="p">:</span> <span class="s1">'4.9'</span><span class="p">,</span> <span class="s1">'petal_width'</span><span class="p">:</span> <span class="s1">'1.5'</span><span class="p">,</span> <span class="s1">'species'</span><span class="p">:</span> <span class="s1">'Iris-versicolor'</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">'sepal_length'</span><span class="p">:</span> <span class="s1">'5.5'</span><span class="p">,</span> <span class="s1">'sepal_width'</span><span class="p">:</span> <span class="s1">'2.3'</span><span class="p">,</span> <span class="s1">'petal_length'</span><span class="p">:</span> <span class="s1">'4'</span><span class="p">,</span>   <span class="s1">'petal_width'</span><span class="p">:</span> <span class="s1">'1.3'</span><span class="p">,</span> <span class="s1">'species'</span><span class="p">:</span> <span class="s1">'Iris-versicolor'</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">'sepal_length'</span><span class="p">:</span> <span class="s1">'6.5'</span><span class="p">,</span> <span class="s1">'sepal_width'</span><span class="p">:</span> <span class="s1">'2.8'</span><span class="p">,</span> <span class="s1">'petal_length'</span><span class="p">:</span> <span class="s1">'4.6'</span><span class="p">,</span> <span class="s1">'petal_width'</span><span class="p">:</span> <span class="s1">'1.5'</span><span class="p">,</span> <span class="s1">'species'</span><span class="p">:</span> <span class="s1">'Iris-versicolor'</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">'sepal_length'</span><span class="p">:</span> <span class="s1">'6.3'</span><span class="p">,</span> <span class="s1">'sepal_width'</span><span class="p">:</span> <span class="s1">'3.3'</span><span class="p">,</span> <span class="s1">'petal_length'</span><span class="p">:</span> <span class="s1">'6'</span><span class="p">,</span>   <span class="s1">'petal_width'</span><span class="p">:</span> <span class="s1">'2.5'</span><span class="p">,</span> <span class="s1">'species'</span><span class="p">:</span> <span class="s1">'Iris-virginica'</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">'sepal_length'</span><span class="p">:</span> <span class="s1">'5.8'</span><span class="p">,</span> <span class="s1">'sepal_width'</span><span class="p">:</span> <span class="s1">'2.7'</span><span class="p">,</span> <span class="s1">'petal_length'</span><span class="p">:</span> <span class="s1">'5.1'</span><span class="p">,</span> <span class="s1">'petal_width'</span><span class="p">:</span> <span class="s1">'1.9'</span><span class="p">,</span> <span class="s1">'species'</span><span class="p">:</span> <span class="s1">'Iris-virginica'</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">'sepal_length'</span><span class="p">:</span> <span class="s1">'7.1'</span><span class="p">,</span> <span class="s1">'sepal_width'</span><span class="p">:</span> <span class="s1">'3'</span><span class="p">,</span>   <span class="s1">'petal_length'</span><span class="p">:</span> <span class="s1">'5.9'</span><span class="p">,</span> <span class="s1">'petal_width'</span><span class="p">:</span> <span class="s1">'2.1'</span><span class="p">,</span> <span class="s1">'species'</span><span class="p">:</span> <span class="s1">'Iris-virginica'</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">'sepal_length'</span><span class="p">:</span> <span class="s1">'6.3'</span><span class="p">,</span> <span class="s1">'sepal_width'</span><span class="p">:</span> <span class="s1">'2.9'</span><span class="p">,</span> <span class="s1">'petal_length'</span><span class="p">:</span> <span class="s1">'5.6'</span><span class="p">,</span> <span class="s1">'petal_width'</span><span class="p">:</span> <span class="s1">'1.8'</span><span class="p">,</span> <span class="s1">'species'</span><span class="p">:</span> <span class="s1">'Iris-virginica'</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">'sepal_length'</span><span class="p">:</span> <span class="s1">'6.5'</span><span class="p">,</span> <span class="s1">'sepal_width'</span><span class="p">:</span> <span class="s1">'3'</span><span class="p">,</span>   <span class="s1">'petal_length'</span><span class="p">:</span> <span class="s1">'5.8'</span><span class="p">,</span> <span class="s1">'petal_width'</span><span class="p">:</span> <span class="s1">'2.2'</span><span class="p">,</span> <span class="s1">'species'</span><span class="p">:</span> <span class="s1">'Iris-virginica'</span><span class="p">}</span>
<span class="p">]</span>
</code></pre></div>

<p>首先，让我们把重点放在以CSV格式打印值上。</p>
<p>因为我们需要对列表中的每个字典进行一些转换，我们知道我们可能需要类似于<code>for</code>循环的东西，所以让我们设置一下。</p>


<p>将字典转换成CSV格式实际上相对简单。我们可以创建一个f字符串，其中的值用逗号分隔。</p>
<p>因为这一行会很长，我建议将字符串分成两行，然后连接起来，就像这样:</p>
<div class="codehilite"><pre><span/><code><span class="k">for</span> <span class="n">iris</span> <span class="ow">in</span> <span class="n">irises</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">iris</span><span class="p">[</span><span class="s1">'sepal_length'</span><span class="p">]</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">iris</span><span class="p">[</span><span class="s1">'sepal_width'</span><span class="p">]</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">iris</span><span class="p">[</span><span class="s1">'petal_length'</span><span class="p">]</span><span class="si">}</span><span class="s2">,"</span> <span class="o">+</span>
        <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">iris</span><span class="p">[</span><span class="s1">'petal_width'</span><span class="p">]</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">iris</span><span class="p">[</span><span class="s1">'species'</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span>
    <span class="p">)</span>
</code></pre></div>

<p>这很好，但我认为我们可以做得更好。</p>
<p>如果我们想坚持f-string方法，我们可以做的一件事是用<code>iris.values()</code>获取值，并将它们析构为一系列变量。这将节省我们在f字符串中使用所有这些订阅表达式的时间。</p>
<div class="codehilite"><pre><span/><code><span class="k">for</span> <span class="n">iris</span> <span class="ow">in</span> <span class="n">irises</span><span class="p">:</span>
    <span class="n">sepal_length</span><span class="p">,</span> <span class="n">sepal_width</span><span class="p">,</span> <span class="n">petal_length</span><span class="p">,</span> <span class="n">petal_width</span><span class="p">,</span> <span class="n">species</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">sepal_length</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">sepal_width</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">petal_length</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">petal_width</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">species</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</code></pre></div>

<p>这无疑是朝着正确方向迈出的一步，但我认为我们还可以做得更好。</p>
<p>我们所有的字典值都是字符串，我们试图用逗号将这些字符串连接在一起，所以让我们使用<code>join</code>方法。</p>
<div class="codehilite"><pre><span/><code><span class="k">for</span> <span class="n">iris</span> <span class="ow">in</span> <span class="n">irises</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">","</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">iris</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span>
</code></pre></div>

<p>如你所见，<code>join</code>在这种情况下非常强大。代码非常短，也非常容易理解。</p>
<p>在这个阶段，我们应该明确地运行我们的代码，并确保一切看起来都是正确的。如果没有任何问题，我们可以用调用<code>write</code>来替换<code>print</code>，这样我们就可以写入文件。</p>
<div class="codehilite"><pre><span/><code><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">"iris_2.csv"</span><span class="p">,</span> <span class="s2">"w"</span><span class="p">)</span> <span class="k">as</span> <span class="n">iris_file</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">iris</span> <span class="ow">in</span> <span class="n">irises</span><span class="p">:</span>
        <span class="n">iris_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">","</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">iris</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span>
</code></pre></div>

<p>如果您运行这段代码，我们不会得到我们想要的，因为我们忘记了一个重要的细节:我们没有在字符串的末尾添加一个换行符。因此，所有内容都将写在一行上。</p>
<p>我们可以将字符串<code>"\\n"</code>连接到我们写入文件的每个字符串:</p>
<div class="codehilite"><pre><span/><code><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">"iris_2.csv"</span><span class="p">,</span> <span class="s2">"w"</span><span class="p">)</span> <span class="k">as</span> <span class="n">iris_file</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">iris</span> <span class="ow">in</span> <span class="n">irises</span><span class="p">:</span>
        <span class="n">iris_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">","</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">iris</span><span class="o">.</span><span class="n">values</span><span class="p">())</span> <span class="o">+</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
</code></pre></div>

<p>如果我们运行代码并看一看<code>iris_2.csv</code>，事情应该是这样的:</p>
<div class="codehilite"><pre><span/><code><span class="mf">5.1</span><span class="p">,</span><span class="mf">3.5</span><span class="p">,</span><span class="mf">1.4</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="n">Iris</span><span class="o">-</span><span class="n">setosa</span>
<span class="mf">4.9</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mf">1.4</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="n">Iris</span><span class="o">-</span><span class="n">setosa</span>
<span class="mf">4.7</span><span class="p">,</span><span class="mf">3.2</span><span class="p">,</span><span class="mf">1.3</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="n">Iris</span><span class="o">-</span><span class="n">setosa</span>
<span class="mf">4.6</span><span class="p">,</span><span class="mf">3.1</span><span class="p">,</span><span class="mf">1.5</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="n">Iris</span><span class="o">-</span><span class="n">setosa</span>
<span class="mi">5</span><span class="p">,</span><span class="mf">3.6</span><span class="p">,</span><span class="mf">1.4</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="n">Iris</span><span class="o">-</span><span class="n">setosa</span>
<span class="mi">7</span><span class="p">,</span><span class="mf">3.2</span><span class="p">,</span><span class="mf">4.7</span><span class="p">,</span><span class="mf">1.4</span><span class="p">,</span><span class="n">Iris</span><span class="o">-</span><span class="n">versicolor</span>
<span class="mf">6.4</span><span class="p">,</span><span class="mf">3.2</span><span class="p">,</span><span class="mf">4.5</span><span class="p">,</span><span class="mf">1.5</span><span class="p">,</span><span class="n">Iris</span><span class="o">-</span><span class="n">versicolor</span>
<span class="mf">6.9</span><span class="p">,</span><span class="mf">3.1</span><span class="p">,</span><span class="mf">4.9</span><span class="p">,</span><span class="mf">1.5</span><span class="p">,</span><span class="n">Iris</span><span class="o">-</span><span class="n">versicolor</span>
<span class="mf">5.5</span><span class="p">,</span><span class="mf">2.3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mf">1.3</span><span class="p">,</span><span class="n">Iris</span><span class="o">-</span><span class="n">versicolor</span>
<span class="mf">6.5</span><span class="p">,</span><span class="mf">2.8</span><span class="p">,</span><span class="mf">4.6</span><span class="p">,</span><span class="mf">1.5</span><span class="p">,</span><span class="n">Iris</span><span class="o">-</span><span class="n">versicolor</span>
<span class="mf">6.3</span><span class="p">,</span><span class="mf">3.3</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mf">2.5</span><span class="p">,</span><span class="n">Iris</span><span class="o">-</span><span class="n">virginica</span>
<span class="mf">5.8</span><span class="p">,</span><span class="mf">2.7</span><span class="p">,</span><span class="mf">5.1</span><span class="p">,</span><span class="mf">1.9</span><span class="p">,</span><span class="n">Iris</span><span class="o">-</span><span class="n">virginica</span>
<span class="mf">7.1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mf">5.9</span><span class="p">,</span><span class="mf">2.1</span><span class="p">,</span><span class="n">Iris</span><span class="o">-</span><span class="n">virginica</span>
<span class="mf">6.3</span><span class="p">,</span><span class="mf">2.9</span><span class="p">,</span><span class="mf">5.6</span><span class="p">,</span><span class="mf">1.8</span><span class="p">,</span><span class="n">Iris</span><span class="o">-</span><span class="n">virginica</span>
<span class="mf">6.5</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mf">5.8</span><span class="p">,</span><span class="mf">2.2</span><span class="p">,</span><span class="n">Iris</span><span class="o">-</span><span class="n">virginica</span>
</code></pre></div> 
                </article>
            
            </div>    
</body>
</html>