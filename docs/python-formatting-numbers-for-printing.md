# 用 Python 格式化数字以便打印

> 原文：<https://blog.teclado.com/python-formatting-numbers-for-printing/>

嘿，欢迎来到另一篇 [Python 片段文章](https://blog.teclado.com/tag/python-snippets/)。本周我们来看看 Python 中数字的字符串表示的一些格式化选项。

字符串格式化实际上是一个令人惊讶的大话题，Python 有它自己的内部[迷你语言](https://docs.python.org/3/library/string.html#format-specification-mini-language)，只是为了处理我们可用的许多格式化选项。这里我们只关注几个与数字有关的例子，但还有很多值得探索的地方。

## 精确

首先，让我们看看如何将浮点数格式化为给定的精度。有两种方法可以做到这一点:我们可以指定我们需要多少个有效数字，或者我们可以指定小数点后需要多少个有效数字。先说前者。

为了指定精度级别，我们需要使用一个冒号(`:`)，后跟一个小数点，以及一些表示精度的整数。我们把它放在 f 字符串的花括号内，在我们想要格式化的值之后。您也可以使用`format`方法，我将在下面演示。

```
x = 4863.4343091          # example float to format

print(f"{x:.6}")          # f-string version
print("{:.6}".format(x))  # format method version 
```

在这两种情况下，我们得到相同的结果:`4863.43`。

正如我们所看到的，我们很长的浮点数被缩短到只有 6 位数。需要注意的一件有趣的事情是，这个格式化操作实际上执行了舍入，所以如果`x`有一个值`4863.435`，那么输出的数字实际上就是`4863.44`。这使用了银行家的四舍五入法(此处解释了[)。](https://blog.teclado.com/rounding-in-python/)

如果我们指定的数字少于浮点数的整数部分，我们最终会使用指数表示:

```
x = 4863.4343091

print(f"{x:.3}")  # 4.86e+03 
```

`4.86e+03`的意思是`4.86 x 10³`，或者`4.86 x 1000`，也就是`4860`。看看这个结果，我们看到我们得到了我们所要求的三个有效数字。

那么我们如何指定 3 个小数位呢？我们只需要添加一个`f`。

```
x = 4863.4343091

print(f"{x:.3f}")  # 4863.434 
```

表示我们希望我们的浮点数显示为一个“定点数”:换句话说，我们希望小数点后有一个特定的位数。我们也可以单独使用`f`，它默认为 6 位精度:

```
x = 4863.4343091

print(f"{x:f}")  # 4863.434309 
```

## 分离器

对于较大的数字，我们通常会写一个分隔符(通常是逗号、空格或句号)，以便于阅读。在 Python 中，我们可以在冒号后使用逗号或下划线来指定这一点。

```
x = 1000000

print(f"{x:,}")  # 1,000,000
print(f"{x:_}")  # 1_000_000 
```

这也适用于浮点和精度格式，逗号在前:

```
x = 4863.4343091

print(f"{x:,.3f}")  # 4,863.434
print(f"{x:_.3f}")  # 4_863.434 
```

## 百分率

我们可以将数字格式化为百分比，只需在格式化选项的末尾添加百分比符号，而不是`f`:

```
questions = 30
correct_answers = 23

print(f"You got {correct_answers / questions :.2%} correct!")
# You got 76.67% correct! 
```

将数字格式化为百分比时，精度级别总是指小数点后的位数。

## 包扎

这就是我们对格式化数字的简短探究。有太多的东西需要学习，我们将在未来的帖子中解决这个问题，所以请确保在 [Twitter](https://twitter.com/TecladoCode) 上关注我们，了解我们所有的最新内容。

我们还向我们博客的读者提供我们的[完整 Python 课程](https://go.tecla.do/complete-python-sale),价格仅为 9.99 美元，如果你点击这篇文章中的链接，优惠券已经为你申请好了。我们非常欢迎您的加入，所以如果您正在寻求提升您的 Python 技能，或者如果您刚刚开始，请查看一下！