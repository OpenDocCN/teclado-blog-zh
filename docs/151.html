<html>
<head>
<title>Day 20: Exercise Solutions | Teclado</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>第20天:锻炼解决方案| Teclado</h1>
<blockquote>原文：<a href="https://blog.teclado.com/python-30-day-20-exercise-solutions/">https://blog.teclado.com/python-30-day-20-exercise-solutions/</a></blockquote><div><article class="pb-12 prose prose-p:font-copy col-start-2 dark:prose-invert">
                    
                    <p>以下是我们为Python 系列<a href="https://blog.teclado.com/30-days-of-python/"> 30天</a><a href="/30-days-of-python/python-30-day-20-map-filter">第20天练习</a>提供的解决方案。在检查解决方案之前，请确保您亲自尝试了这些练习！</p>
<h3>1)使用<code>map</code>调用下面列表中每个字符串的<code>strip</code>方法。在控制台的不同行上打印童谣的行。</h3>
<div class="codehilite"><pre><span/><code><span class="n">humpty_dumpty</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"  Humpty Dumpty sat on a wall,  "</span><span class="p">,</span>
    <span class="s2">"Humpty Dumpty had a great fall;     "</span><span class="p">,</span>
    <span class="s2">"  All the king's horses and all the king's men "</span><span class="p">,</span>  
    <span class="s2">"    Couldn't put Humpty together again."</span>
<span class="p">]</span>
</code></pre></div>

<p>首先，让我们通过定义一个单独的函数在给定的行上执行strip来解决这个问题。我准备叫我的<code>line_stripper</code>，不过你爱怎么叫都行。</p>
<div class="codehilite"><pre><span/><code><span class="k">def</span> <span class="nf">line_stripper</span><span class="p">(</span><span class="n">line</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</code></pre></div>

<p>现在我们可以编写我们的<code>map</code>调用了。当调用<code>map</code>时，我们需要首先传入我们想要调用的函数，然后传入我们想要从中获取参数的iterables。在这种情况下，我们只有一个可迭代的:<code>humpty_dumpty</code>。</p>
<p>然后我们可以解包<code>map</code>对象并将其传递给<code>print</code>。</p>
<div class="codehilite"><pre><span/><code><span class="k">def</span> <span class="nf">line_stripper</span><span class="p">(</span><span class="n">line</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

<span class="n">humpty_dumpty</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"  Humpty Dumpty sat on a wall,  "</span><span class="p">,</span>
    <span class="s2">"Humpty Dumpty had a great fall;     "</span><span class="p">,</span>
    <span class="s2">"  All the king's horses and all the king's men "</span><span class="p">,</span>  
    <span class="s2">"    Couldn't put Humpty together again."</span>
<span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="o">*</span><span class="nb">map</span><span class="p">(</span><span class="n">line_stripper</span><span class="p">,</span> <span class="n">humpty_dumpty</span><span class="p">),</span> <span class="n">sep</span><span class="o">=</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
</code></pre></div>

<p>如果您愿意，您也可以使用一个<code>for</code>循环来打印这些值。</p>
<p>除了定义这个<code>line_stripper</code>函数，我们还可以使用lambda表达式:</p>
<div class="codehilite"><pre><span/><code><span class="n">humpty_dumpty</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"  Humpty Dumpty sat on a wall,  "</span><span class="p">,</span>
    <span class="s2">"Humpty Dumpty had a great fall;     "</span><span class="p">,</span>
    <span class="s2">"  All the king's horses and all the king's men "</span><span class="p">,</span>  
    <span class="s2">"    Couldn't put Humpty together again."</span>
<span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="o">*</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">line</span><span class="p">:</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span> <span class="n">humpty_dumpty</span><span class="p">),</span> <span class="n">sep</span><span class="o">=</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
</code></pre></div>

<p>但是如果我们不想用lambda定义函数，我们也可以使用来自<code>operator</code>模块的<code>methodcaller</code>函数。</p>
<div class="codehilite"><pre><span/><code><span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">methodcaller</span>

<span class="n">humpty_dumpty</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"  Humpty Dumpty sat on a wall,  "</span><span class="p">,</span>
    <span class="s2">"Humpty Dumpty had a great fall;     "</span><span class="p">,</span>
    <span class="s2">"  All the king's horses and all the king's men "</span><span class="p">,</span>  
    <span class="s2">"    Couldn't put Humpty together again."</span>
<span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="o">*</span><span class="nb">map</span><span class="p">(</span><span class="n">methodcaller</span><span class="p">(</span><span class="s2">"strip"</span><span class="p">),</span> <span class="n">humpty_dumpty</span><span class="p">),</span> <span class="n">sep</span><span class="o">=</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
</code></pre></div>

<p>这些方法中的任何一种都非常好。</p>
<h3>2)下面你会发现一个包含几个名字的元组。使用带有过滤条件的列表理解，以便只有少于8个字符的名称出现在新列表中。确保新列表中的每个名字都是大写的。</h3>
<div class="codehilite"><pre><span/><code><span class="n">names</span> <span class="o">=</span> <span class="p">(</span><span class="s2">"bob"</span><span class="p">,</span> <span class="s2">"Christopher"</span><span class="p">,</span> <span class="s2">"Rachel"</span><span class="p">,</span> <span class="s2">"MICHAEL"</span><span class="p">,</span> <span class="s2">"jessika"</span><span class="p">,</span> <span class="s2">"francine"</span><span class="p">)</span>
</code></pre></div>

<p>首先，让我们创建一个理解，把名字变成小写。一旦我们知道过滤条件有效，我们就可以添加过滤条件。</p>
<div class="codehilite"><pre><span/><code><span class="n">names</span> <span class="o">=</span> <span class="p">(</span><span class="s2">"bob"</span><span class="p">,</span> <span class="s2">"Christopher"</span><span class="p">,</span> <span class="s2">"Rachel"</span><span class="p">,</span> <span class="s2">"MICHAEL"</span><span class="p">,</span> <span class="s2">"jessika"</span><span class="p">,</span> <span class="s2">"francine"</span><span class="p">)</span>
<span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="n">name</span><span class="o">.</span><span class="n">title</span><span class="p">()</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">]</span>
</code></pre></div>

<p>快速打印的<code>names</code>显示我们没有任何问题，所以现在我们需要添加我们的过滤器。在这种情况下，我们希望检查名称是否少于8个字符。</p>
<p>我们可以使用<code>len</code>函数找出一个字符串中有多少个字符，并且我们可以使用<code>&lt;</code>将结果与<code>8</code>进行比较。</p>
<div class="codehilite"><pre><span/><code><span class="n">names</span> <span class="o">=</span> <span class="p">(</span><span class="s2">"bob"</span><span class="p">,</span> <span class="s2">"Christopher"</span><span class="p">,</span> <span class="s2">"Rachel"</span><span class="p">,</span> <span class="s2">"MICHAEL"</span><span class="p">,</span> <span class="s2">"jessika"</span><span class="p">,</span> <span class="s2">"francine"</span><span class="p">)</span>
<span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="n">name</span><span class="o">.</span><span class="n">title</span><span class="p">()</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">]</span>
</code></pre></div>

<p>如果你想知道我们如何用<code>map</code>和<code>filter</code>复制这样的东西，我们可以像这样将调用<code>filter</code>的结果传递给<code>map</code>:</p>
<div class="codehilite"><pre><span/><code><span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">methodcaller</span>

<span class="n">names</span> <span class="o">=</span> <span class="p">(</span><span class="s2">"bob"</span><span class="p">,</span> <span class="s2">"Christopher"</span><span class="p">,</span> <span class="s2">"Rachel"</span><span class="p">,</span> <span class="s2">"MICHAEL"</span><span class="p">,</span> <span class="s2">"jessika"</span><span class="p">,</span> <span class="s2">"francine"</span><span class="p">)</span>
<span class="n">names_title</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">methodcaller</span><span class="p">(</span><span class="s2">"title"</span><span class="p">),</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">name</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">,</span> <span class="n">names</span><span class="p">))</span>
</code></pre></div>

<p>对于像这样的情况，我们需要执行修改，我们需要做一些过滤，理解语法通常更整洁，更容易理解。</p>
<h3>3)使用<code>filter</code>删除以下范围内的所有负数:<code>range(-5, 11)</code>。将剩余的数字打印到控制台。</h3>
<p>如果我们愿意，我们实际上可以在一行中这样做:</p>
<div class="codehilite"><pre><span/><code><span class="nb">print</span><span class="p">(</span><span class="o">*</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">number</span><span class="p">:</span> <span class="n">number</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">11</span><span class="p">)))</span>
</code></pre></div>

<p>这里我们说的是，对于<code>range(-5, 11)</code>中的每个数字，如果它大于<code>0</code>，就保留这个数字。然后我们使用<code>*</code>解包<code>filter</code>对象，这样我们就可以访问我们保存的值。</p>
<p>这是极其简洁的；然而，在这种情况下，我认为为我们的<code>filter</code>谓词创建一个单独的函数很有意义。</p>
<div class="codehilite"><pre><span/><code><span class="k">def</span> <span class="nf">is_positive</span><span class="p">(</span><span class="n">number</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">number</span> <span class="o">&gt;=</span> <span class="mi">0</span>

<span class="nb">print</span><span class="p">(</span><span class="o">*</span><span class="nb">filter</span><span class="p">(</span><span class="n">is_positive</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">11</span><span class="p">)))</span>
</code></pre></div> 
                </article>
            
            </div>    
</body>
</html>