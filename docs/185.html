<html>
<head>
<title>How to simplify long if statements in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何简化Python中的长if语句</h1>
<blockquote>原文：<a href="https://blog.teclado.com/simplify-long-if-statements-python/">https://blog.teclado.com/simplify-long-if-statements-python/</a></blockquote><div><div class="post-content">
<p>如果语句是很好的工具，但是随着分支数量的增长，它们很快变得难以使用。在本文中，我们将探索if语句的两种替代方案:</p>
<ul>
<li><a href="https://blog.teclado.com/python-match-case/">“比赛...案例"</a>，Python 3.10语言新特性。</li>
<li>字典，在处理用户输入时特别有用。</li>
</ul>
<h2 id="thisarticlesscenarioalongifstatement">本文的场景:一个很长的if语句</h2>
<p>假设您有一个像这样的if语句(假设已经定义了<code>average</code>函数):</p>
<pre><code class="language-python">numbers = [1, 4, 16, 20]
action = input(f"What would you like to do with {numbers}?")  # e.g. add

if action == "add":
    print(sum(numbers))
elif action == "avg":
    print(average(numbers))
elif action == "max":
    print(max(numbers))
else:
    print("Action not recognized")
</code></pre>
<h2 id="usingmatchcasetosimplifyanifstatementchain">使用火柴...case来简化if语句链</h2>
<p>在<a href="https://blog.teclado.com/python-match-case/">比赛中...案例"</a>，我们仍然需要告诉Python不同的选项是什么，以及在每种情况下做什么:</p>
<pre><code class="language-python">def average(seq):
	return sum(seq) / len(seq)

numbers = [1, 4, 16, 20]
action = input(f"What would you like to do with {numbers}? ")

match action:
	case "add":
		print(sum(numbers))
	case "avg":
		print(average(numbers))
	case "max":
		print(max(numbers))
	case _:
		print("Operation not recognized.")
</code></pre>
<p>虽然这看起来好一点，但仍然有很多相同的重复。每个条件分支都有复制的<code>print()</code>函数，并且有大量的关键字。</p>
<p>总的来说，代码块的长度是相同的。</p>
<p>此外，最大的问题仍然存在:随着您添加更多选项，分支条件也会增加。</p>
<h2 id="useadictionarytosimplifyalongifstatement">使用字典简化长的if语句</h2>
<p>您可以将用户的选项存储在一个字典中，而不是使用log if-elif链或长的match-case链:</p>
<pre><code class="language-python">options = {
    "add": sum,
    "avg": average,
    "max": max
}
</code></pre>
<p>然后你可以问用户他们想要使用哪个选项(从字典中):</p>
<pre><code class="language-python">options = {
    "add": sum,
    "avg": average,
    "max": max
}
numbers = [1, 4, 16, 20]

action = input(f"What would you like to do with {numbers}?")  # e.g. add
</code></pre>
<p>这样，我们可以直接从字典中检索函数:</p>
<pre><code class="language-python">options = {
    "add": sum,
    "avg": average,
    "max": max
}
numbers = [1, 4, 16, 20]

action = input(f"What would you like to do with {numbers}?")  # e.g. add

operation = options.get(action)
</code></pre>
<p>因为字典将字符串映射到函数，所以<code>operation</code>变量现在将包含我们想要运行的函数。</p>
<p>剩下的就是运行<code>operation(numbers)</code>来得到我们的结果。如果用户输入了<code>'add'</code>，那么<code>operation</code>将是<code>sum</code>功能。</p>
<p>我们还应该做一些错误检查，以确保我们不会试图运行一个不存在的函数，如果用户输入的东西不是字典的键之一。</p>
<pre><code class="language-python">options = {
    "add": sum,
    "avg": average,
    "max": max
}
numbers = [1, 4, 16, 20]

action = input(f"What would you like to do with {numbers}?")  # e.g. add

operation = options.get(action)

if operation:
    operation(numbers)
else:
    print("Action not recognized")
</code></pre>
<p>您仍然需要one if语句，以防用户选择字典中没有关键字的内容，但这是一个不会随时间增长的单分支if语句。</p>
<p>另一个好处是，通过使用字典键，您可以很容易地告诉用户哪些选项是可用的:</p>
<pre><code class="language-python">option_texts = '|'.join(options.keys()
action = input(f"What would you like to do with {numbers}? ({option_texts}) ")
# Would show "What would you like to do with [1, 4, 16, 20]? (add|avg|max) "
</code></pre>
<h2 id="conclusion">结论</h2>
<p>在这篇文章中，我们看到了两种简化if语句的方法:使用“匹配”...格”和使用字典。</p>
<p>如果你想学习更多关于Python的知识，可以考虑参加我们的<a href="https://go.tecla.do/complete-python-sale">完整Python课程</a>，它将带你从初级到高级(包括OOP、web开发、异步开发等等！).我们有一个<strong> 30天退款保证</strong>，所以你真的没有什么损失去尝试一下。我们很希望你能来！</p>
<p><small>照片由<a href="https://unsplash.com/@christinhumephoto?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">克里斯汀·休姆</a>在<a href="https://unsplash.com/s/photos/computer?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a>T5】</small></p>
</div>
</div>    
</body>
</html>